<div ng-controller="orderPersonnelController">
    <div ng-show="ordersClient.all.length > 0" class="basket-list">
        <div class="row margin-top-20">
            <div class="cell two margin-top-8">
                <div class="search-bar order-search-bar">
                    <i class="search padding-5"></i>
                    <input class="twelve"
                           type="text"
                           ng-model="query_name"
                           ng-keyup="$event.keyCode == 13 ? searchByName(query_name) : null"
                           i18n-placeholder="search.filter.order">
                </div>
            </div>
            <div ng-init="getAllFilters()" class="cell twelve-mobile six catalog">
                <button ng-click="initPopUpFilters('showPopUpColumnsReassort')"
                        class="filterButton">
                    <i class="star-circle"></i>
                    <span><i18n>crre.reassort</i18n></span>
                    <div class="columns-popup-wrapper right-magnet">
                        <div class="right-magnet columns-popup-button">
                            <span ng-show="showPopUpColumnsReassort">&#x25B2;</span>
                            <span ng-hide="showPopUpColumnsReassort">&#x25BC;</span>
                        </div>
                        <div ng-class="{'open' : showPopUpColumnsReassort}" class="right-magnet columns-popup">
                            <label class="columns-popup-items left-text ellipsis" ng-class="{'open' : showPopUpColumnsReassort}"
                                   ng-repeat="reassort in reassorts | orderBy:'reassort'">
                                <input type="checkbox" ng-model = "reassort.isChecked" ng-change="getFilter(reassort.reassort, 'reassort')">
                                <span ng-bind="lang.translate(reassort.reassort)"></span>
                            </label>
                        </div>
                    </div>
                </button>
                <button ng-click="initPopUpFilters('showPopUpColumnsGrade')"
                        class="filterButton">
                    <i class="school"></i>
                    <span><i18n>Grades</i18n></span>
                    <div class="columns-popup-wrapper right-magnet">
                        <div class="right-magnet columns-popup-button">
                            <span ng-show="showPopUpColumnsGrade">&#x25B2;</span>
                            <span ng-hide="showPopUpColumnsGrade">&#x25BC;</span>
                        </div>
                        <div ng-class="{'open' : showPopUpColumnsGrade}" class="right-magnet columns-popup">
                            <label class="columns-popup-items left-text ellipsis" ng-class="{'open' : showPopUpColumnsGrade}"
                                   ng-repeat="grade in equipments.grades | orderBy:'name'">
                                <input type="checkbox" ng-model = "grade.isChecked" ng-change="getFilter(grade.name, 'niveaux.libelle')">
                                <span>[[grade.name]]</span>
                            </label>
                        </div>
                    </div>
                </button>
            </div>
            <div class="cell twelve-mobile right-magnet">
                <button class="right-magnet" ng-click="exportCSV()"><i18n>crre.orderEquipment.manage.exportCSV</i18n></button>
            </div>
        </div>
        <div class="row">
            <div style="margin:0.5em">
                <div class="cell field ng-scope" ng-repeat="teacher in users | filter: { isChecked: true }">
                    <span ng-show="$first && teacher.isChecked" class="bold-font-weight">&nbsp;Enseignants : </span>
                    <span ng-if="teacher.isChecked" ng-class="{'margin-right-10' : $last}">[[teacher.user_name]]</span>
                    <span ng-repeat-end ng-if="!$last">,&nbsp;</span>
                </div>
                <div class="cell field ng-scope" ng-repeat="grade in equipments.grades | filter: { isChecked: true }">
                    <span ng-show="$first && grade.isChecked" class="bold-font-weight">&nbsp;Niveaux : </span>
                    <span ng-if="grade.isChecked" ng-class="{'margin-right-10' : $last}">[[grade.name]]</span>
                    <span ng-repeat-end ng-if="!$last">,&nbsp;</span>
                </div>
            </div>
        </div>
        <container template="order-list" class="order-client-validation"></container>
    </div>
    <article ng-show = "ordersClient.all.length <= 0 " class="centered-text row">
        <p><i18n>crre.orderEquipment.manage.empty.order</i18n></p>
    </article>
    <lightbox show="display.lightbox.deleteOrder" on-close="cancelOrderEquipmentDelete()">
        <container template="orderClient.delete"></container>
    </lightbox>
</div>