<div class="twelve-mobile ten centered row" ng-controller="campaignsListController">
    <div class="row aligned" ng-if="structures.all.length > 1">
        <h4 class="right-magnet"><i18n>multi-structures.choice</i18n> :
            <search-and-select class="cell right-magnet horizontal-margin"
                               param1="UAI"
                               param2="name"
                               options="structures.all"
                               ng-model="current.structure"
                               search-on="name" order-by="name"
                               ng-change="initCampaign(current.structure)">
            </search-and-select>
        </h4>

    </div>
    <div>
        <article class="twelve cell"
                 ng-class="{disabled : !campaign.accessible}"
                 ng-repeat="campaign in campaigns.all track by $index">
            <div class="ten cell eight-mobile" >
                <h3 ng-class="!campaign.accessible ? 'title-disabled' : ''" >[[campaign.name]]</h3>
                <div>
                    <p ng-bind-html="campaign.description" class="small-text"></p>
                    <div class="groupButtons">
                        <div class="twelve-mobile four cell" >
                            <p class="small-text-align" ng-if="campaign.purse_enabled">
                                    <span style ="font-weight: bold;"><i18n>crre.campaign.purse.region</i18n></span>
                            </p>
                            <p class="small-text-align" ng-if="campaign.purse_enabled">
                                <em class="small-text">
                                    <i18n>crre.campaign.amount.init</i18n> : <span ng-bind="campaign.initial_purse_amount | currency"></span>
                                    <i18n>crre.remainder</i18n> : <span ng-bind="campaign.purse_amount | currency"></span>
                                </em>
                            </p>
                            <p ng-repeat="purse in campaign.purse_licence" class="small-text-align" ng-if="campaign.purse_enabled">
                                <em class="small-text">
                                    <i18n>crre.campaign.licence</i18n> [[purse.name]] : <span ng-bind="purse.initial_amount"></span>
                                    <i18n>crre.remainder</i18n> : <span ng-bind="purse.amount"></span>
                                </em>
                            </p>
                            <p class="small-text-align" ng-show="campaign.nb_order && campaign.nb_order !== 0">
                                <em class="small-text"Ajoute>
                                    [[campaign.nb_order]]
                                    <i18n ng-show="campaign.nb_order > 1">crre.demands.waiting</i18n>
                                    <i18n ng-show="campaign.nb_order === 1">crre.demand.waiting</i18n>
                                </em>
                            </p>
                        </div>
                        <div class="twelve-mobile right-magnet"  >
                            <div class="twelve-mobile cell ">
                                <input type="button"
                                       class="button"
                                       ng-show="campaign.nb_order && campaign.nb_order !== 0"
                                       ng-click="openOrderToMain(campaign)"
                                       i18n-value="crre.access.demand"/>
                                <input type="button"
                                       class="button"
                                       ng-show="!campaign.nb_order"
                                       ng-click="openOrderToMain(campaign)"
                                       ng-disabled="true"
                                       i18n-value="crre.demand.empty"/>
                            </div>
                            <div class="twelve-mobile cell">
                                <input ng-show="campaign.accessible"
                                       ng-click="openCampaign(campaign)"
                                       type="button"
                                       class="button"
                                       i18n-value="crre.access.catalog"/>
                                <input ng-show="!campaign.accessible"
                                       type="button"
                                       class="button"
                                       ng-disabled="true"
                                       i18n-value="crre.catalog.disabled"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </div>
    <article ng-if="campaigns.isEmpty()">
        <h4 class="centered-text">
            <i class="sad-face horizontal-margin"></i>
            <i18n>crre.campaigns.empty</i18n></h4>
    </article>
</div>