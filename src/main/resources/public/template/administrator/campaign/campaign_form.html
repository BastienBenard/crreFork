<div class="row ten centered"  workflow="crre.administrator" ng-controller="campaignFormController">
    <h1>
        <i18n ng-show="campaign.id == undefined">crre.campaigns.add</i18n>
        <i18n ng-show="campaign.id !== undefined">crre.campaigns.modify</i18n>
    </h1>

    <form>
        <article>
            <div class="row horizontal-spacing vertical-spacing">
                <div class="eight cell horizontal-spacing twelve-mobile">
                    <h2><i18n>crre.information.general</i18n></h2>
                    <label class="four vertical-spacing" style = "margin-right: 120px;">
                        <span class="four">
                            <i18n>crre.campaigns.name</i18n> *
                        </span>
                        <input type="text" class="four" ng-model="campaign.name" required>
                    </label>
                    <select class = "four" ng-model="campaign_type" ng-change="changeList()" ng-options="format.name_type for format in formatCheck">
                        <option value="" disabled selected>Type de campagne</option>
                    </select>
                    <div class="row twelve">
                        <label class="row twelve vertical-spacing">
                        <span class="twelve">
                            <i18n>crre.campaigns.description</i18n>
                        </span>
                            <editor ng-model="campaign.description"></editor>
                        </label>
                    </div>
                </div>
            </div>
            <div class="eight horizontal-spacing twelve-mobile">
        <h2 style="margin: 25px 0 10px 0">
            <i18n>crre.campaign.options</i18n>
        </h2>
            <div>
        <label class="checkbox">
            <input type="checkbox" ng-model="campaign.use_credit"
            />
            <span><i18n>Utilisez les crédits</i18n></span>
            <i class="info-circle campaignTooltip" tooltip="Si cette case est cochée, les crédits des établissements seront décrémentés lors des commandes."></i>
        </label>
        <label class="checkbox">
            <input type="checkbox" ng-model="campaign.reassort"
            />
            <span><i18n>Campagne de réassort</i18n></span>
            <i class="info-circle campaignTooltip" tooltip="Toutes les références commandées dans cette campagne seront automatiquement taguées réassort."></i>
        </label>
            </div>
            <div class="margin-top-14">
        <span>Accès catalogue : </span>
        <select ng-model="campaign.catalog" ng-options="article.name for article in articleFormat">
            <option value="" disabled selected>Type de catalogue</option>
        </select>
            </div>
            <div class="margin-top-14">
                    <label class="four vertical-spacing">
                        <label class="one checkbox">
                            <input type="checkbox"
                                   ng-model="campaign.automatic_close"/>
                            <span></span>
                        </label>
                        <span>
                            <i18n>crre.campaigns.date.automatisation</i18n>
                        </span>
                        <div class="vertical-spacing"
                             ng-show="campaign.automatic_close" style="padding-bottom: 55px">
                            <span class="four cell">
                            <i18n>crre.campaigns.date.start</i18n>
                        </span>
                            <div class="six cell">
                                <date-picker ng-model="campaign.start_date" class="cell six twelve-mobile " ></date-picker>
                            </div>
                            <span class="four cell">
                            <i18n>crre.campaigns.date.end</i18n>
                        </span>
                            <div class="six cell">
                                <date-picker ng-model="campaign.end_date" class="cell six twelve-mobile "></date-picker>
                            </div>
                        </div>
                    </label>
                </div>
            </div>
            <div class="horizontal-spacing ">
                <h2 style="margin: 25px 0 10px 0">
                    <i18n>crre.campaign.groups</i18n>
                    :
                </h2>
                <table class="twelve">
                    <div class="campaignCheckbox">
                        <label class = "checkbox">
                            <input type="checkbox" ng-model="allSelected" ng-change="selectStructures()">
                            <span>Tous/Aucun</span>
                        </label>
                        <label class="checkbox" ng-repeat="group in structureGroups.all track by $index ">
                            <input type="checkbox" ng-model="group.selected">
                            <span>[[group.name]]</span>
                            <span tooltip="crre.regroup.permanent" ng-if="categories.includes(group.name)" ng-class="{true:'campaignCheckboxIcons'}[categories.includes(group.name)]"></span>
                        </label>
                    </div>
                </table>
            </div>
<!--
            <div ng-class="{'articlenumerique':'laptop-icon', 'articlepapier':'book-icon'}[equipment.type]">
-->

        <!-- <h4 style="margin: 50px 0 10px 0">
            <i18n>crre.campaign.options</i18n>
            :
        </h4>
        <article>
            <div class="row">
                <span class="cell">
                    <i18n>crre.campaign.type.choose</i18n>
                    :
                </span>
                <switch-toggle ng-model="campaign.purse_enabled" class="cell horizontal-margin-four"></switch-toggle>
            </div>
            <div class="row">
                <span class="cell">
                    <i18n>crre.campaign.priority.choose</i18n>
                    :
                </span>
                <switch-toggle ng-model="campaign.priority_enabled" class="cell horizontal-margin-four"></switch-toggle>
            </div>
            <div ng-if="campaign.priority_enabled" class="priority_field" >
                <div>
                    <input type="radio" ng-model="campaign.priority_field" value="ORDER"/>
                    <label ><i18n>crre.on.order</i18n></label>
                </div>
                <div>
                    <input type="radio" ng-model="campaign.priority_field" value="PROJECT"/>
                    <label ><i18n>crre.on.project</i18n></label>
                </div>
            </div>
        </article>-->
        <div class="right-magnet warning" ng-show="!validCampaignForm(campaign)">
            <i18n>not.valid.campaign.form</i18n>
        </div>
        <div class="row">
            <div class="right-magnet">
                <input type="button" class="cancel" ng-click="redirectTo('/campaigns')" i18n-value="cancel"/>
                <input type="submit" class="button" ng-click="validCampaign(campaign)"
                       ng-disabled="!validCampaignForm(campaign)"/>
            </div>
        </div>
        </article>
    </form>
</div>